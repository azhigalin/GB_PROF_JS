(()=>{var t={319:t=>{t.exports={add:function(t,e){return t.contents.push(e.body),{name:e.body.product_name,newCart:JSON.stringify(t,null,4)}},change:function(t,e){var n=t.contents.find((function(t){return t.id_product===+e.params.id}));return n.quantity+=e.body.quantity,{name:n.product_name,newCart:JSON.stringify(t,null,4)}},remove:function(t,e){var n=t.contents.find((function(t){return t.id_product===+e.params.id}));return t.contents.splice(t.contents.indexOf(n),1),{name:n.product_name,newCart:JSON.stringify(t,null,4)}}}},508:(t,e,n)=>{var r=n(860),s=n(147),i=n(303),o=r.Router();o.get("/",(function(t,e){s.readFile("dist/server/db/userCart.json","utf-8",(function(t,n){t?e.sendStatus(404,JSON.stringify({result:0,text:t})):e.send(n)}))})),o.post("/",(function(t,e){i(t,e,"add","dist/server/db/userCart.json")})),o.put("/:id",(function(t,e){i(t,e,"change","dist/server/db/userCart.json")})),o.delete("/:id",(function(t,e){i(t,e,"remove","dist/server/db/userCart.json")})),t.exports=o},303:(t,e,n)=>{var r=n(147),s=n(319),i=n(281),o={add:s.add,change:s.change,remove:s.remove};t.exports=function(t,e,n,s){r.readFile(s,"utf-8",(function(u,a){if(u)e.sendStatus(404,JSON.stringify({result:0,text:u}));else{var d=o[n](JSON.parse(a),t),c=d.name,f=d.newCart;r.writeFile(s,f,(function(t){t?e.send('{"result": 0}'):(i(c,n),e.send('{"result": 1}'))}))}}))}},281:(t,e,n)=>{var r=n(245),s=n(147);t.exports=function(t,e){s.readFile("dist/server/db/stats.json","utf-8",(function(n,i){if(n)console.log("Can't read file");else{var o=JSON.parse(i);o.push({time:r().format("DD MMM YYYY, h:mm:ss a"),prod_name:t,action:e}),s.writeFile("dist/server/db/stats.json",JSON.stringify(o,null,4),(function(t){t&&console.log("Can't write file")}))}}))}},860:t=>{"use strict";t.exports=require("express")},245:t=>{"use strict";t.exports=require("moment")},147:t=>{"use strict";t.exports=require("fs")}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}(()=>{var t=n(860),e=n(147),r=n(508),s=t();s.use(t.json()),s.use("/",t.static("dist/public")),s.use("/api/cart",r),s.get("/api/products",(function(t,n){e.readFile("dist/server/db/products.json","utf-8",(function(t,e){t?n.sendStatus(404,JSON.stringify({result:0,text:t})):n.send(e)}))}));var i=process.env.PORT||3e3;s.listen(i,(function(){return console.log("Listening at port ".concat(i," ...."))}))})()})();